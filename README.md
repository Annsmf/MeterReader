# MeterReader

## 系统方案

第一步使用目标检测算法检测待识别表具区域，第二步使用语义分割算法分割出表具的刻度和指针，第三步计算表具读数。

![](https://github.com/zhuyushi/MeterReader/blob/master/image/system.png) 

* 目标检测<br>
  平衡考虑算法的推理速度和检测效果，目标检测算法采用YOLOv3模型实现。目标检测部分只做检测不对表具进行分类。 

* 语义分割<br>
  根据目标检测的结果，从原图中裁剪出表具区域图像，做为语意分割模型的输入，考虑到刻度和指针均为细小区域，采用分割效果较好的DeepLapv3+模型实现。 

* 读数计算<br>
  预先配置表具相关数据（单位、量程等），结合语意分割结果计算出表具最终读数。

## 目标检测

### 目标检测方案

1、目标检测算法采用YOLOv3模型实现，被检测表具基本没有很小目标的情况，所以根据经验，人工重新设计了锚框的尺寸，以便更加准确的预测目标区域。

2、目标检测部分只对表具进行检测，不进行分类识别表具的单位量程等信息，通过配置的形式输入给推理进程，结合分割结果综合计算表具读数。 

### 模型训练与评估 

* 数据集 <br>
  标注工具    ：Labelme <br>
  数据集格式  ：coco <br>

* 模型训练 <br>
  训练工具    ：使用百度models提供的PaddleDetection工具 <br> 
  模型选择    ：yolov3_darknet53 <br>
  预训练模型  ：百度提供的DarkNet53_pretrained.tar <br>

* 模型评估 <br>
  使用百度PaddleDetection配套的评估程序进行评估。YOLOv3目标检测算法的评估结果（coco评估标准）: mAP[.5:.9]为94.7%，
